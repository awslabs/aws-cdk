{
  "Resources": {
      "StateMachineRoleB840431D": {
          "Type": "AWS::IAM::Role",
          "Properties": {
              "AssumeRolePolicyDocument": {
                  "Statement": [
                      {
                          "Action": "sts:AssumeRole",
                          "Effect": "Allow",
                          "Principal": {
                              "Service": {
                                  "Fn::Join": [
                                      "",
                                      [
                                          "states.",
                                          {
                                              "Ref": "AWS::Region"
                                          },
                                          ".amazonaws.com"
                                      ]
                                  ]
                              }
                          }
                      }
                  ],
                  "Version": "2012-10-17"
              }
          },
          "Metadata": {
              "aws:cdk:path": "aws-stepfunctions-tasks-emr-containers-create-virtual-cluster-integ/StateMachine/Role/Resource"
          }
      },
      "StateMachineRoleDefaultPolicyDF1E6607": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
              "PolicyDocument": {
                  "Statement": [
                      {
                          "Action": "emr-containers:CreateVirtualCluster",
                          "Effect": "Allow",
                          "Resource": {
                              "Fn::Join": [
                                  "",
                                  [
                                      "arn:",
                                      {
                                          "Ref": "AWS::Partition"
                                      },
                                      ":emr-containers:",
                                      {
                                          "Ref": "AWS::Region"
                                      },
                                      ":",
                                      {
                                          "Ref": "AWS::AccountId"
                                      },
                                      ":virtual-cluster/emr-containers-test-cluster"
                                  ]
                              ]
                          }
                      }
                  ],
                  "Version": "2012-10-17"
              },
              "PolicyName": "StateMachineRoleDefaultPolicyDF1E6607",
              "Roles": [
                  {
                      "Ref": "StateMachineRoleB840431D"
                  }
              ]
          },
          "Metadata": {
              "aws:cdk:path": "aws-stepfunctions-tasks-emr-containers-create-virtual-cluster-integ/StateMachine/Role/DefaultPolicy/Resource"
          }
      },
      "StateMachine2E01A3A5": {
          "Type": "AWS::StepFunctions::StateMachine",
          "Properties": {
              "RoleArn": {
                  "Fn::GetAtt": [
                      "StateMachineRoleB840431D",
                      "Arn"
                  ]
              },
              "DefinitionString": {
                  "Fn::Join": [
                      "",
                      [
                          "{\"StartAt\":\"Create a Virtual Cluster Job\",\"States\":{\"Create a Virtual Cluster Job\":{\"End\":true,\"Type\":\"Task\",\"Resource\":\"arn:",
                          {
                              "Ref": "AWS::Partition"
                          },
                          ":states:::emr-containers:createVirtualCluster\",\"Parameters\":{\"Name\":\"emr-containers-test-cluster\",\"ContainerProvider\":{\"Id\":\"test-eks\",\"Info\":{\"EksInfo\":{\"Namespace\":\"kube-system\"}},\"Type\":\"EKS\"}}}},\"TimeoutSeconds\":30}"
                      ]
                  ]
              }
          },
          "DependsOn": [
              "StateMachineRoleDefaultPolicyDF1E6607",
              "StateMachineRoleB840431D"
          ],
          "Metadata": {
              "aws:cdk:path": "aws-stepfunctions-tasks-emr-containers-create-virtual-cluster-integ/StateMachine/Resource"
          }
      },
      "CDKMetadata": {
          "Type": "AWS::CDK::Metadata",
          "Properties": {
              "Analytics": "v2:deflate64:H4sIAAAAAAAAE1VPzQrCMAx+Fu9dNz14ForHoUzwXroMs9V2NKkio+9uu1309P3lS0gjG9nsTvpNlemnejE+gFxurM0k1OAukefIQnlHHKLh4nVAPgYDheegR0bvkigrFmKYh+hMsahiTRPJc9vlMdboIJAKoBnuGDhqq2zMhSD+Wut1hlabR26UI786CdRPuXTertGKV2/RfIrcWEpJON+DHKl+7Y/ykD8cCbEK0TE+QXYbfgEtN7B1/AAAAA=="
          },
          "Metadata": {
              "aws:cdk:path": "aws-stepfunctions-tasks-emr-containers-create-virtual-cluster-integ/CDKMetadata/Default"
          },
          "Condition": "CDKMetadataAvailable"
      }
  },
  "Outputs": {
      "stateMachineArn": {
          "Value": {
              "Ref": "StateMachine2E01A3A5"
          }
      }
  },
  "Conditions": {
      "CDKMetadataAvailable": {
          "Fn::Or": [
              {
                  "Fn::Or": [
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "af-south-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "ap-east-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "ap-northeast-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "ap-northeast-2"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "ap-south-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "ap-southeast-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "ap-southeast-2"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "ca-central-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "cn-north-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "cn-northwest-1"
                          ]
                      }
                  ]
              },
              {
                  "Fn::Or": [
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "eu-central-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "eu-north-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "eu-south-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "eu-west-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "eu-west-2"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "eu-west-3"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "me-south-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "sa-east-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "us-east-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "us-east-2"
                          ]
                      }
                  ]
              },
              {
                  "Fn::Or": [
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "us-west-1"
                          ]
                      },
                      {
                          "Fn::Equals": [
                              {
                                  "Ref": "AWS::Region"
                              },
                              "us-west-2"
                          ]
                      }
                  ]
              }
          ]
      }
  }
}